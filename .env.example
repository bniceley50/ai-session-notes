# ╔══════════════════════════════════════════════════════════════╗
# ║  DEPLOY SAFETY — READ BEFORE PRODUCTION DEPLOYMENT         ║
# ║                                                            ║
# ║  • NODE_ENV must be "production" in prod (Next.js default) ║
# ║  • ALLOW_DEV_LOGIN must NOT be set in production           ║
# ║  • ALLOW_SESSION_AUTOCREATE must NOT be set in production  ║
# ║  • JOBS_RUNNER_TOKEN should be set in production           ║
# ║  • AUTH_COOKIE_SECRET must be a unique, random 32+ bytes   ║
# ╚══════════════════════════════════════════════════════════════╝

# ─── Supabase (required) ─────────────────────────────────────
# Project URL and anon key from Supabase Dashboard → Settings → API
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=

# Service role key — optional, used for server-side admin operations
# If missing, Supabase features degrade gracefully (filesystem is source of truth)
SUPABASE_SERVICE_ROLE_KEY=

# ─── Auth (required) ─────────────────────────────────────────
# Secret for signing session cookies (generate: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))")
AUTH_COOKIE_SECRET=

# Default practice/org ID assigned to new users
DEFAULT_PRACTICE_ID=

# Session cookie TTL in seconds (required, must be positive integer)
SESSION_TTL_SECONDS=28800

# ─── AI APIs (required) ──────────────────────────────────────
OPENAI_API_KEY=
ANTHROPIC_API_KEY=

# AI API Kill Switch — prevents accidental spending
# Set to 1 to enable real Whisper + Claude API calls
# If not set, pipeline will fail with clear error message
AI_ENABLE_REAL_APIS=0

# Optional: Explicit stub mode for UI testing without API costs
# Only used if AI_ENABLE_REAL_APIS is not set
# AI_ENABLE_STUB_APIS=0

# ─── Timeouts (optional, sensible defaults) ──────────────────
# AI_WHISPER_TIMEOUT_MS=120000
# AI_CLAUDE_TIMEOUT_MS=90000
# AI_WHISPER_CHUNK_TIMEOUT_MS=120000

# ─── Job Runner Security ─────────────────────────────────────
# Token required to call POST /api/jobs/runner (prevents unauthorized API spending)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Required in production; optional in development
JOBS_RUNNER_TOKEN=

# ─── Session / Job Lifecycle (optional, sensible defaults) ───
# Job TTL in seconds before auto-purge (default: 86400 = 24 hours)
# JOB_TTL_SECONDS=86400

# ─── Artifacts (optional) ────────────────────────────────────
# Root directory for job artifacts (default: .artifacts)
# ARTIFACTS_ROOT=.artifacts

# ─── Dev-only flags (NEVER set in production) ────────────────
# Allow dev login bypass — DOUBLE-GATED: requires NODE_ENV=development AND flag=1.
# Setting this in production has NO effect (code checks NODE_ENV first).
# ALLOW_DEV_LOGIN=1

# Allow session autocreate on audio upload — blocked when NODE_ENV=production.
# ALLOW_SESSION_AUTOCREATE=1
