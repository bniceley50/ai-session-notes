# ──────────────────────────────────────────────────────────────────
# AI Session Notes — Environment Variables
#
# Copy this file:  cp .env.example .env.local
# Then fill in the real values below.
#
# .env.local is git-ignored and will never be committed.
# ──────────────────────────────────────────────────────────────────

# ── AI API Keys ──────────────────────────────────────────────────
# Required for real transcription (Whisper) and note generation (Claude).
# In stub mode these are unused — set them to any non-empty string.
OPENAI_API_KEY=
ANTHROPIC_API_KEY=

# ── AI Mode Toggle ───────────────────────────────────────────────
# Stub mode (no real API calls — safe for development):
#   AI_ENABLE_STUB_APIS=1   AI_ENABLE_REAL_APIS=0
# Real mode (calls Whisper + Claude — costs money):
#   AI_ENABLE_STUB_APIS=0   AI_ENABLE_REAL_APIS=1
# BOTH flags are checked — see src/lib/jobs/pipeline.ts
AI_ENABLE_STUB_APIS=1
AI_ENABLE_REAL_APIS=0

# ── AI Timeouts (ms) ────────────────────────────────────────────
# Optional — defaults shown. Increase if you see timeout errors.
# AI_WHISPER_TIMEOUT_MS=120000
# AI_CLAUDE_TIMEOUT_MS=90000

# ── Auth / Session ───────────────────────────────────────────────
# Cookie encryption secret — must be ≥ 32 characters.
AUTH_COOKIE_SECRET=dev-secret-change-in-production-min-32-chars-required
SESSION_TTL_SECONDS=86400

# ── Cognito OAuth ────────────────────────────────────────────────
# Required for production auth. Dev-login bypasses these entirely,
# but config.ts reads them at import time so they must be set.
COGNITO_DOMAIN=example.auth.us-east-1.amazoncognito.com
COGNITO_CLIENT_ID=your-cognito-client-id
COGNITO_CLIENT_SECRET=your-cognito-client-secret
COGNITO_REDIRECT_URI=http://localhost:3000/api/auth/callback
COGNITO_LOGOUT_URI=http://localhost:3000/
COGNITO_USER_POOL_ID=us-east-1_yourPoolId
COGNITO_REGION=us-east-1

# ── Dev Authentication (development only) ────────────────────────
# Bypasses Cognito so you can log in at /api/auth/dev-login.
# NEVER enable in production.
ALLOW_DEV_LOGIN=1
DEFAULT_PRACTICE_ID=00000000-0000-0000-0000-000000000001

# ── Supabase ─────────────────────────────────────────────────────
# Temporary session storage. Get these from your Supabase project
# dashboard → Settings → API.
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=

# ── Job Pipeline ─────────────────────────────────────────────────
# How long jobs live before auto-cleanup (seconds). Default: 24 hours.
JOB_TTL_SECONDS=86400

# Authentication token for POST /api/jobs/runner (prevents unauthorized API spending).
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JOBS_RUNNER_TOKEN=

# Allow auto-creation of sessions from random UUIDs.
# Required for Playwright E2E tests. Safe for dev.
ALLOW_SESSION_AUTOCREATE=1
